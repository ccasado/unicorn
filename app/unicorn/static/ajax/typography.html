<div class="row">
	<div id="breadcrumb" class="col-md-12">
		<ol class="breadcrumb">
			<li><a href="index.html">Dashboard</a></li>
			<li><a href="#">Topics</a></li>
		</ol>
	</div>
</div>
<h4 class="page-header">Topics</h4>
<div class="row">
	<div class="col-xs-12">
		<div class="row">
			<div class="col-xs-12">
				<div class="row">
					<div class="col-xs-12">
						<div class="box">
							<div class="box-content" id="topics_words">
								<p class="page-header">Headings</p>
				
							</div>
						</div>
					</div>
				</div>
<!-- 				<div class="row">
					<div class="col-xs-12">
						<div class="box">
							<div class="box-content">
								<p class="page-header">Body text</p>
								<p class="lead">Lead paragraph</p>

							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-12">
						<div class="box">
							<div class="box-content">
								<p class="page-header">Code</p>
								<h4>Inline</h4>
								<p>For example, <code>&lt;section&gt;</code> should be 
								ed as inline.</p>
								<p><pre>For example, &lt;code&gt;&amp;lt;section&amp;gt;&lt;/code&gt; should<br />be wrapped as inline.</pre></p>
								<h4>User input</h4>
								<p>To switch directories, type <kbd>cd</kbd> followed by the name of the directory.</p>
								<p><pre>To switch directories, type &lt;kbd&gt;cd&lt;/kbd&gt; followed<br />by the name of the directory.</pre></p>
								<h4>Basic block</h4>
								<p><pre>&lt;p&gt;Sample text here...&lt;/p&gt;</pre></p>
								<p><pre>&lt;pre&gt;&amp;lt;p&amp;gt;Sample text here...&amp;lt;/p&amp;gt;&lt;/pre&gt;</pre></p>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-12">
						<div class="box">
							<div class="box-content">
								<p class="page-header">Address</p>
					
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div> -->
	<div class="col-xs-12">
		<div class="row">
			<div class="col-xs-12">
				<div class="box">
					<div class="box-content">
						<p class="page-header">Documents</p>
					
					</div>
				</div>
			</div>
		</div>
		<!-- <div class="row">
			<div class="col-xs-12">
				<div class="box">
					<div class="box-content">
						<p class="page-header">Lists</p>
						<h4>Ordered list</h4>
						<ol>
							<li>Normal list item</li>
							<li><b>Bold list item</b></li>
							<li><i>Italic text list item</i></li>
							<li><i class="fa fa-upload"></i> List item with icon</li>
							<li><i class="fa fa-upload txt-success"></i> List item with color icon</li>
						</ol>
						<p><pre>&lt;ol&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Normal list item&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;b&gt;Bold list item&lt;/b&gt;&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;i&gt;Italic text list item&lt;/i&gt;&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;i class=&quot;fa fa-upload&quot;&gt;&lt;/i&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List item with icon<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;i class=&quot;fa fa-upload txt-success&quot;&gt;&lt;/i&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List item with color icon<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;<br />&lt;/ol&gt;</pre></p>
						<h4>Unordered list</h4>
						<ul>
							<li>Normal list item</li>
							<li><b>Bold list item</b></li>
							<li><i>Italic text list item</i></li>
							<li><i class="fa fa-video-camera"></i> List item with icon</li>
							<li><i class="fa fa-star txt-success"></i> List item with color icon</li>
							<li>Subitem
								<ul>
									<li>Normal subitem</li>
									<li><b>Bold subitem</b></li>
									<li><i>Italic text subitem</i></li>
									<li><i class="fa fa-upload"></i> Subitem with icon</li>
									<li><i class="fa fa-upload txt-danger"></i> Subitem with icon</li>
								</ul>
						  </li>
						</ul>
						<p><pre>&lt;ul&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Normal list item&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;b&gt;Bold list item&lt;/b&gt;&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;i&gt;Italic text list item&lt;/i&gt;&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;i class=&quot;fa fa-video-camera&quot;&gt;&lt;/i&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List item with icon<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;i class=&quot;fa fa-star txt-success&quot;&gt;&lt;/i&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List item with color icon<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Subitem<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Normal subitem&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;b&gt;Bold subitem&lt;/b&gt;&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;i&gt;Italic text subitem&lt;/i&gt;&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;i class=&quot;fa fa-upload&quot;&gt;&lt;/i&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Subitem with icon<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;i class=&quot;fa fa-upload txt-danger&quot;&gt;&lt;/i&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Subitem with icon<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;<br />&nbsp;&nbsp;&lt;/ul&gt;</pre></p>
						<h4>Simple inline list</h4>
						<ul class="list-inline">
							<li>Android</li>
							<li>Firefox OS</li>
							<li>Apple IOS</li>
						</ul>
						<p><pre>&lt;ul class=&quot;list-inline&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Android&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Firefox OS&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Apple IOS&lt;/li&gt;<br />&lt;/ul&gt;</pre></p>
						<h4>Inline list with icons</h4>
						<ul class="list-inline">
							<li class="fa fa-file-o"> File</li>
							<li class="fa fa-floppy-o"> Save</li>
							<li class="fa fa-cut"> Cut</li>
						</ul>
						<p><pre>&lt;ul class=&quot;list-inline&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li class=&quot;fa fa-file-o&quot;&gt; File&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li class=&quot;fa fa-floppy-o&quot;&gt; Save&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li class=&quot;fa fa-cut&quot;&gt; Cut&lt;/li&gt;<br />&lt;/ul&gt;</pre></p>
						<h4>Inline list with color icons</h4>
						<ul class="list-inline">
							<li><i class="fa fa-file-o txt-primary"></i> File</li>
							<li><i class="fa fa-floppy-o txt-danger"></i> Save</li>
							<li><i class="fa fa-cut txt-info"></i> Cut</li>
						</ul>
						<p><pre>&lt;ul class=&quot;list-inline&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;i class=&quot;fa fa-file-o txt-primary&quot;&gt;&lt;/i&gt; File&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;i class=&quot;fa fa-floppy-o txt-danger&quot;&gt;&lt;/i&gt; Save&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;i class=&quot;fa fa-cut txt-info&quot;&gt;&lt;/i&gt;Cut&lt;/li&gt;<br />&lt;/ul&gt;<br /> </pre></p>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-xs-12">
				<div class="box">
					<div class="box-content">
						<p class="page-header">Descriptions</p>
						<h4>Normal description</h4>
						<dl>
							<dt>Linux</dt>
							<dd>Linux is a Unix-like and POSIX-compliant computer operating system assembled under the model of free and open source software development and distribution.</dd>
							<dt>Microsoft Windows</dt>
							<dd>Series of graphical interface operating systems developed, marketed, and sold by Microsoft.</dd>
						</dl>
						<p><pre>&lt;dl&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;dt&gt;Linux&lt;/dt&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;dd&gt;Linux is a Unix-like and POSIX-compliant<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;computer operating system assembled under<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the model of free and open source software<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;development and distribution.<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dd&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;dt&gt;Microsoft Windows&lt;/dt&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;dd&gt;Series of graphical interface operating systems<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;developed, marketed, and sold by Microsoft.<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dd&gt;<br />&lt;/dl&gt;</pre></p>
						<h4>Horizontal description</h4>
						<dl class="dl-horizontal">
							<dt>Android</dt>
							<dd>Operating system for mobile devices, produced by Google</dd>
							<dt>Maemo</dt>
							<dd>Software platform developed by Nokia and then handed over to Hildon Foundation for smartphones and Internet tablets.</dd>
						</dl>
						<p><pre>&lt;dl class=&quot;dl-horizontal&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;dt&gt;Android&lt;/dt&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;dd&gt;Operating system for mobile devices,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;produced by Google<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dd&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;dt&gt;Maemo&lt;/dt&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;dd&gt;Software platform developed by Nokia and then<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handed over to Hildon Foundation for<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;smartphones and Internet tablets.<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dd&gt;<br />&lt;/dl&gt;</pre></p>
					</div>
				</div>
			</div> -->
		 </div>
	</div>
</div>

<script type="text/javascript">
$(document).ready(function(){

    $.get('/unicorn/topics_latest', function(data) { 
    	data=JSON.parse(data)
    	 tbl_row="";
		 tbl_body="";

         var i=1;
		 for (var key in data['topics']) {

		 	tbl_row+="<tr><td>"+key+'</td><td><div id="dateline' + key + '"></div></td><td>'+data['topics'][key].slice(0,10).join(', ')+'</td><td><div style="margin-left:'+ (100-100*data['dist'][key]).toFixed(2)+'%;background-color:#6AA6D6" class="proportion"><span class="proportion">&nbsp;</span></div></td><td>'+(100*data['dist'][key]).toFixed(2)+'&#37;</td></tr>';

		 	draw_timeline(data['date_agg'][key], key);

          //$('#topics_words').append(data['topics'][key].toString()+'\n');
          i++;
        }
         tbl_body+='<table id="topics_table" class="display"><thead><tr><th>Topic</th><th>1973-74</th><th>Top Terms</th><th>% of results</th><th></th></thead><tbody>'+tbl_row+"</tbody></table>"
         $("#topics_words").html(tbl_body)
         $("#topics_table").dataTable({
         	// initialize with a descending sort on the proportion column (col 3)
         	"order": [[ 4, "desc" ]],
         	'iDisplayLength': 20,
 			"sDom": '<"top">rt<"bottom"lp><"clear">'
         	});

		var i=1;
		 for (var key in data['topics']) {
		 	draw_timeline(data['date_agg'][key], key);
          i++;
        }



    })
});


function draw_timeline(data, key) {
	 	data=JSON.parse(data);

	 	var	parseDate = d3.time.format("%Y-%m-%d").parse;



	    data.forEach(function(d) {
	        d.date = parseDate(d.Date);
	        d.count = +d.Count;
	    });

	    //console.log(data);

		var margin = {top: 15, right: 0, bottom: 5, left: 0},
		    width = 75 - margin.left - margin.right,
		    height = 50 - margin.top - margin.bottom;

		// currently, number of months (e.g. date range) is hard coded
		// to do...un-hardcode this
		var num_months = 12;

		// Parse the date / time
		var x = d3.time.scale().range([width/num_months/2, width-width/num_months/2]);

		var y = d3.scale.linear().range([height, 0]);

		var xAxis = d3.svg.axis()
		    .scale(x)
		    .orient("bottom")
		    .ticks(0)
		    .tickSize(0);

		var yAxis = d3.svg.axis()
		    .scale(y)
		    .orient("left")
		    .ticks(10);


		var cellid = "#dateline" + key
		console.log(cellid);


		var svg = d3.select(cellid).append("svg")
		    .attr("width", width + margin.left + margin.right)
		    .attr("height", height + margin.top + margin.bottom)
		    .style("margin-bottom", "-10px")
		    .style("margin-top", "-10px")
		  .append("g")
		    .attr("transform", 
		          "translate(" + margin.left + "," + margin.top + ")");
		
		 x.domain([parseDate("1973-01-01"),parseDate("1974-01-01")]);
		 y.domain([0, d3.max(data, function(d) { return d.count; })]);

		  svg.append("g")
		      .attr("class", "x axis")
		      .attr("transform", "translate(0," + height + ")")
		      .call(xAxis)

		svg.selectAll("g .x.axis")
			.style('fill', 'none')
			.style('stroke','#bdbdbd')
  			.style('shape-rendering', 'crispEdges')

		  svg.selectAll("bar")
		      .data(data)
		    .enter().append("rect")
		      .style("fill", "steelblue")
		      .attr("width", width / num_months * 0.45)
		      .attr("x", function(d) { return x(d.date) - (width/num_months)/2; })
		      .attr("y", function(d) { return y(d.count); })
		      .attr("height", function(d) { return height - y(d.count); });

;}





</script>